class m{validators=[];errors=[];constructor(e){this.form=e,this.form.addEventListener("submit",t=>this.OnSubmit(t))}addValidator(e){this.validators.push({field:this.form.elements[e.name],name:e.name,method:e.method,message:e.message})}validate(){return this.errors=[],this.validators.forEach(e=>{e.method(e.field)||this.errors.push(e)}),this.errors.length===0}OnSubmit(e){this.removeInlineErrors(),this.validate()||(e.preventDefault(),e.stopImmediatePropagation(),this.showInlineErrors())}createInlineError(e){const t=document.createElement("span");return t.classList.add("field-error"),t.innerText=e.message,t.id=`${e.name}-error`,t}showInlineErrors(){this.errors.forEach(e=>{const t=this.createInlineError(e);e.field instanceof Node?(e.field.classList.add("invalid"),e.field.setAttribute("aria-invalid","true")):e.field instanceof NodeList&&e.field.forEach(n=>{n.classList.add("invalid"),n.setAttribute("aria-describedby",t.id),n.setAttribute("aria-invalid","true")});const i=e.field.closest("div");i&&i.appendChild(t)})}removeInlineErrors(){this.form.querySelectorAll(".field-error").forEach(e=>e.remove()),this.form.querySelectorAll(".invalid").forEach(e=>{e.classList.remove("invalid"),e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby")})}}const c=a=>fetch(`undefined/building/${a}`).then(e=>e.json()).then(e=>e.data).catch(e=>console.error(e)),h=a=>fetch(`undefined/bike/${a}`).then(e=>e.json()).then(e=>e.data).catch(e=>console.error(e)),u=(a,e)=>fetch(`undefined/bike/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(t=>t.json()).then(t=>(console.log(t.data.id),t.data.id)).catch(t=>{console.error(t)}),v=(a,e)=>fetch(`undefined/building/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(t=>t.json()).then(t=>(console.log(t.data.id),t.data.id)).catch(t=>{console.error(t)}),g=function(a){const e=document.createElement("div");e.classList="review";const t=document.createElement("h4");t.innerHTML=a.firstname;const i=document.createElement("p");for(let d=1;d<=a.satisfaction;d++)i.innerHTML+="â˜…",i.classList="star active";const n=document.createElement("p");n.innerHTML=a.message;const r=document.createElement("p");return r.innerHTML="Geschreven op : "+a.date,e.append(t,i,n,r),e},f=(a,e)=>e.appendChild(g(a)),p=new URLSearchParams(window.location.search),s=p.get("id"),l=document.querySelector(".formCampus");if(l){const a=new m(l);a.addValidator({name:"email",method:e=>e.value.trim().length>0,message:"Email is een verplicht veld gelieve dit in te vullen"}),a.addValidator({name:"email",method:e=>e.value.trim().length===0?!0:e.value.trim().match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),message:"Email moet een bestaand email adres zijn!"}),a.addValidator({name:"firstname",method:e=>e.value.trim().length>0,message:"Voornaam is een verplicht veld gelieve dit in te vullen"}),a.addValidator({name:"firstname",method:e=>e.value.trim().length!==1,message:"Voornaam moet een bestaande naam zijn"}),a.addValidator({name:"name",method:e=>e.value.trim().length>0,message:"Naam is een verplicht veld gelieve dit in te vullen"}),a.addValidator({name:"name",method:e=>e.value.trim().length!==2,message:"Naam moet een bestaande naam zijn"}),a.addValidator({name:"message",method:e=>e.value.trim().length>0,message:"Bericht is een verplicht veld gelieve dit in te vullen"}),a.addValidator({name:"message",method:e=>e.value.trim().length===0?!0:e.value.trim().length>20,message:"Bericht moet minstens 20 karakters bevatten."}),a.addValidator({name:"rating",method:e=>{const t=Number(e.value);return[1,2,3,4,5].includes(t)},message:"Tevredenheid is een verplicht veld gelieve dit in te vullen"}),l.addEventListener("submit",function(e){e.preventDefault(),console.log("submit");const t=Object.fromEntries(new FormData(this).entries());t.Buidling_ID=parseInt(s),console.log(t),v(t,s),c(s),this.reset()})}const o=document.querySelector(".formBike");if(o){const a=new m(o);a.addValidator({name:"email",method:e=>e.value.trim().length>0,message:"Email is een verplicht veld gelieve dit in te vullen"}),a.addValidator({name:"email",method:e=>e.value.trim().length===0?!0:e.value.trim().match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),message:"Email moet een bestaand email adres zijn"}),a.addValidator({name:"firstname",method:e=>e.value.trim().length>0,message:"Voornaam is een verplicht veld gelieve dit in te vullen"}),a.addValidator({name:"firstname",method:e=>e.value.trim().length!==1,message:"Voornaam moet een bestaande naam zijn"}),a.addValidator({name:"name",method:e=>e.value.trim().length>0,message:"Naam is een verplicht veld gelieve dit in te vullen"}),a.addValidator({name:"name",method:e=>e.value.trim().length!==2,message:"Naam moet een bestaande naam zijn"}),a.addValidator({name:"message",method:e=>e.value.trim().length>0,message:"Bericht is een verplicht veld gelieve dit in te vullen"}),a.addValidator({name:"message",method:e=>e.value.trim().length===0?!0:e.value.trim().length>20,message:"Bericht moet minstens 20 karakters bevatten."}),a.addValidator({name:"rating",method:e=>{const t=Number(e.value);return[1,2,3,4,5].includes(t)},message:"Tevredenheid is een verplicht veld gelieve dit in te vullen"}),o.addEventListener("submit",async function(e){e.preventDefault(),console.log("submit");const t=Object.fromEntries(new FormData(this).entries());await u(t,s);const i=document.querySelector(".reviews");i.innerHTML="",h(s).then(n=>n.forEach(r=>f(r,i))).catch(n=>console.error(n)),this.reset()})}export{f as a,h as b,c as g};
